import{j as C,M as E,P as V,g as F,k as _,l as v,n as P,r as A,an as D,ao as Q,W as I,aE as M,K as B,V as R,aF as $,aG as j,aH as w}from"./index-C6vICkOl.js";const T=["horizontal","vertical","cell","none"],O=C({name:"QMarkupTable",props:{...E,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:t=>T.includes(t)}},setup(t,{slots:f}){const i=F(),b=V(t,i.proxy.$q),r=_(()=>`q-markup-table q-table__container q-table__card q-table--${t.separator}-separator`+(b.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(t.dense===!0?" q-table--dense":"")+(t.flat===!0?" q-table--flat":"")+(t.bordered===!0?" q-table--bordered":"")+(t.square===!0?" q-table--square":"")+(t.wrapCells===!1?" q-table--no-wrap":""));return()=>v("div",{class:r.value},[v("table",{class:"q-table"},P(f.default))])}}),G=C({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:f,emit:i}){const b=F(),r=A(null);let l=0;const u=[];function m(e){const s=typeof e=="boolean"?e:t.noErrorFocus!==!0,d=++l,x=(a,o)=>{i(`validation${a===!0?"Success":"Error"}`,o)},g=a=>{const o=a.validate();return typeof o.then=="function"?o.then(n=>({valid:n,comp:a}),n=>({valid:!1,comp:a,err:n})):Promise.resolve({valid:o,comp:a})};return(t.greedy===!0?Promise.all(u.map(g)).then(a=>a.filter(o=>o.valid!==!0)):u.reduce((a,o)=>a.then(()=>g(o).then(n=>{if(n.valid===!1)return Promise.reject(n)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return d===l&&x(!0),!0;if(d===l){const{comp:o,err:n}=a[0];if(n!==void 0&&console.error(n),x(!1,o),s===!0){const S=a.find(({comp:k})=>typeof k.focus=="function"&&M(k.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function q(){l++,u.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&B(e);const s=l+1;m().then(d=>{s===l&&d===!0&&(t.onSubmit!==void 0?i("submit",e):e?.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&B(e),i("reset"),R(()=>{q(),t.autofocus===!0&&t.noResetFocus!==!0&&c()})}function c(){$(()=>{if(r.value===null)return;(r.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(r.value.querySelectorAll("[tabindex]"),s=>s.tabIndex!==-1))?.focus({preventScroll:!0})})}j(w,{bindComponent(e){u.push(e)},unbindComponent(e){const s=u.indexOf(e);s!==-1&&u.splice(s,1)}});let p=!1;return D(()=>{p=!0}),Q(()=>{p===!0&&t.autofocus===!0&&c()}),I(()=>{t.autofocus===!0&&c()}),Object.assign(b.proxy,{validate:m,resetValidation:q,submit:y,reset:h,focus:c,getValidationComponents:()=>u}),()=>v("form",{class:"q-form",ref:r,onSubmit:y,onReset:h},P(f.default))}});export{O as Q,G as a};
