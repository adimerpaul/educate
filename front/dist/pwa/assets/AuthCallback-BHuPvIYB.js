import{_ as o,c as a,o as r,w as i,b as s,a as n,a5 as c}from"./index-C6vICkOl.js";import{Q as l}from"./QPage-c3qQwDhl.js";const u={name:"AuthCallback",created(){const e=this.$route.query.token;if(console.log("token recibido en callback:",e),!e)return this.$q.notify({type:"negative",message:"Token no presente en el callback"}),this.$router.replace("/login");this.$axios.get("/me",{headers:{Authorization:`Bearer ${e}`}}).then(({data:t})=>{this.$store.isLogged=!0,this.$store.user=t||{},localStorage.setItem("tokenEducate",e),this.$axios.defaults.headers.common.Authorization=`Bearer ${e}`,this.$alert.success(`¡Bienvenido, ${t.name||"usuario"}!`),this.$router.replace("/")}).catch(()=>{this.$store.isLogged=!0})}},d={class:"row items-center q-gutter-sm"};function h(e,t,$,p,m,f){return r(),a(l,{class:"flex flex-center"},{default:i(()=>[s("div",d,[n(c,{size:"32px"}),t[0]||(t[0]=s("div",null,"Iniciando sesión…",-1))])]),_:1})}const _=o(u,[["render",h]]);export{_ as default};
