import{k as c,j as N,r as m,R as M,b8 as p,W as D,l as d,an as G,n as A,a5 as J,v as H,aq as B,g as E,p as X,q as F,s as K,as as U,b9 as Y,az as Z,ai as ee,am as te,x as ie,E as ne,ba as oe,bb as le,b1 as j,bc as Q,bd as ae,m as re}from"./index-Df8BWSg2.js";import{Q as O}from"./QResizeObserver-D5xsHC2a.js";const se={ratio:[String,Number]};function ue(e,v){return c(()=>{const n=Number(e.ratio||(v!==void 0?v.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const ce=1.7778,me=N({name:"QImg",props:{...se,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ce},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:v,emit:n}){const o=m(e.initialRatio),u=ue(e,o),a=E(),{registerTimeout:h,removeTimeout:y}=M(),{registerTimeout:b,removeTimeout:r}=M(),w=c(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),T=c(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[m(null),m(w.value)],l=m(0),z=m(!1),C=m(!1),k=c(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),R=c(()=>({width:e.width,height:e.height})),L=c(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),x=c(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function i(){if(r(),e.loadingShowDelay===0){z.value=!0;return}b(()=>{z.value=!0},e.loadingShowDelay)}function s(){r(),z.value=!1}function S({target:t}){B(a)===!1&&(y(),o.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,g(t,1))}function g(t,q){q===1e3||B(a)===!0||(t.complete===!0?$(t):h(()=>{g(t,q+1)},50))}function $(t){B(a)!==!0&&(l.value=l.value^1,f[l.value].value=null,s(),t.getAttribute("__qerror")!=="true"&&(C.value=!1),n("load",t.currentSrc||t.src))}function _(t){y(),s(),C.value=!0,f[l.value].value=T.value,f[l.value^1].value=w.value,n("error",t)}function I(t){const q=f[t].value,P={key:"img_"+t,class:L.value,style:x.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...q};return l.value===t?Object.assign(P,{class:P.class+"current",onLoad:S,onError:_}):P.class+="loaded",d("div",{class:"q-img__container absolute-full",key:"img"+t},d("img",P))}function V(){return z.value===!1?d("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},A(v[C.value===!0?"error":"default"])):d("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},v.loading!==void 0?v.loading():e.noSpinner===!0?void 0:[d(J,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){H(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,q=>{y(),C.value=!1,q===null?(s(),f[l.value^1].value=w.value):i(),f[l.value].value=q},{immediate:!0})};p.value===!0?D(t):t()}return()=>{const t=[];return u.value!==null&&t.push(d("div",{key:"filler",style:u.value})),f[0].value!==null&&t.push(I(0)),f[1].value!==null&&t.push(I(1)),t.push(d(G,{name:"q-transition--fade"},V)),d("div",{key:"main",class:k.value,style:R.value,role:"img","aria-label":e.alt},t)}}}),he=N({name:"QPageContainer",setup(e,{slots:v}){const{proxy:{$q:n}}=E(),o=X(K,F);if(o===F)return console.error("QPageContainer needs to be child of QLayout"),F;U(Y,!0);const u=c(()=>{const a={};return o.header.space===!0&&(a.paddingTop=`${o.header.size}px`),o.right.space===!0&&(a[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(a.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(a[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),a});return()=>d("div",{class:"q-page-container",style:u.value},A(v.default))}}),{passive:W}=Z,de=["both","horizontal","vertical"],fe=N({name:"QScrollObserver",props:{axis:{type:String,validator:e=>de.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ee},emits:["scroll"],setup(e,{emit:v}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,u,a;H(()=>e.scrollTarget,()=>{b(),y()});function h(){o?.();const T=Math.max(0,oe(u)),f=le(u),l={top:T-n.position.top,left:f-n.position.left};if(e.axis==="vertical"&&l.top===0||e.axis==="horizontal"&&l.left===0)return;const z=Math.abs(l.top)>=Math.abs(l.left)?l.top<0?"up":"down":l.left<0?"left":"right";n.position={top:T,left:f},n.directionChanged=n.direction!==z,n.delta=l,n.directionChanged===!0&&(n.direction=z,n.inflectionPoint=n.position),v("scroll",{...n})}function y(){u=te(a,e.scrollTarget),u.addEventListener("scroll",r,W),r(!0)}function b(){u!==void 0&&(u.removeEventListener("scroll",r,W),u=void 0)}function r(T){if(T===!0||e.debounce===0||e.debounce==="0")h();else if(o===null){const[f,l]=e.debounce?[setTimeout(h,e.debounce),clearTimeout]:[requestAnimationFrame(h),cancelAnimationFrame];o=()=>{l(f),o=null}}}const{proxy:w}=E();return H(()=>w.$q.lang.rtl,h),D(()=>{a=w.$el.parentNode,y()}),ie(()=>{o?.(),b()}),Object.assign(w,{trigger:r,getPosition:()=>n}),ne}}),Se=N({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:v,emit:n}){const{proxy:{$q:o}}=E(),u=m(null),a=m(o.screen.height),h=m(e.container===!0?0:o.screen.width),y=m({position:0,direction:"down",inflectionPoint:0}),b=m(0),r=m(p.value===!0?0:j()),w=c(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),T=c(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),f=c(()=>r.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),l=c(()=>r.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function z(i){if(e.container===!0||document.qScrollPrevented!==!0){const s={position:i.position.top,direction:i.direction,directionChanged:i.directionChanged,inflectionPoint:i.inflectionPoint.top,delta:i.delta.top};y.value=s,e.onScroll!==void 0&&n("scroll",s)}}function C(i){const{height:s,width:S}=i;let g=!1;a.value!==s&&(g=!0,a.value=s,e.onScrollHeight!==void 0&&n("scrollHeight",s),R()),h.value!==S&&(g=!0,h.value=S),g===!0&&e.onResize!==void 0&&n("resize",i)}function k({height:i}){b.value!==i&&(b.value=i,R())}function R(){if(e.container===!0){const i=a.value>b.value?j():0;r.value!==i&&(r.value=i)}}let L=null;const x={instances:{},view:c(()=>e.view),isContainer:c(()=>e.container),rootRef:u,height:a,containerHeight:b,scrollbarWidth:r,totalWidth:c(()=>h.value+r.value),rows:c(()=>{const i=e.view.toLowerCase().split(" ");return{top:i[0].split(""),middle:i[1].split(""),bottom:i[2].split("")}}),header:Q({size:0,offset:0,space:!1}),right:Q({size:300,offset:0,space:!1}),footer:Q({size:0,offset:0,space:!1}),left:Q({size:300,offset:0,space:!1}),scroll:y,animate(){L!==null?clearTimeout(L):document.body.classList.add("q-body--layout-animate"),L=setTimeout(()=>{L=null,document.body.classList.remove("q-body--layout-animate")},155)},update(i,s,S){x[i][s]=S}};if(U(K,x),j()>0){let i=function(){g=null,$.classList.remove("hide-scrollbar")},s=function(){if(g===null){if($.scrollHeight>o.screen.height)return;$.classList.add("hide-scrollbar")}else clearTimeout(g);g=setTimeout(i,300)},S=function(_){g!==null&&_==="remove"&&(clearTimeout(g),i()),window[`${_}EventListener`]("resize",s)},g=null;const $=document.body;H(()=>e.container!==!0?"add":"remove",S),e.container!==!0&&S("add"),ae(()=>{S("remove")})}return()=>{const i=re(v.default,[d(fe,{onScroll:z}),d(O,{onResize:C})]),s=d("div",{class:w.value,style:T.value,ref:e.container===!0?void 0:u,tabindex:-1},i);return e.container===!0?d("div",{class:"q-layout-container overflow-hidden",ref:u},[d(O,{onResize:k}),d("div",{class:"absolute-full",style:f.value},[d("div",{class:"scroll",style:l.value},[s])])]):s}}});export{me as Q,he as a,Se as b};
